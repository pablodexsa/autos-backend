
> autos-backend@0.0.1 start:dev
> nest start --watch

[2J[3J[H[[90m7:24:38 PM[0m] Starting compilation in watch mode...

[96msrc/app.module.ts[0m:[93m8[0m:[93m10[0m - [91merror[0m[90m TS2459: [0mModule '"./purchases/purchase.entity"' declares 'Purchase' locally, but it is not exported.

[7m8[0m import { Purchase } from './purchases/purchase.entity';
[7m [0m [91m         ~~~~~~~~[0m

  [96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m
    [7m4[0m import { Purchase } from './purchase.entity';
    [7m [0m [96m         ~~~~~~~~[0m
    'Purchase' is declared here.

[96msrc/app.module.ts[0m:[93m22[0m:[93m22[0m - [91merror[0m[90m TS2345: [0mArgument of type 'string | undefined' is not assignable to parameter of type 'string'.
  Type 'undefined' is not assignable to type 'string'.

[7m22[0m       port: parseInt(process.env.DB_PORT, 10),
[7m  [0m [91m                     ~~~~~~~~~~~~~~~~~~~[0m

[96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m - [91merror[0m[90m TS2303: [0mCircular definition of import alias 'Purchase'.

[7m4[0m import { Purchase } from './purchase.entity';
[7m [0m [91m         ~~~~~~~~[0m

[96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m - [91merror[0m[90m TS2459: [0mModule '"./purchase.entity"' declares 'Purchase' locally, but it is not exported.

[7m4[0m import { Purchase } from './purchase.entity';
[7m [0m [91m         ~~~~~~~~[0m

  [96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m
    [7m4[0m import { Purchase } from './purchase.entity';
    [7m [0m [96m         ~~~~~~~~[0m
    'Purchase' is declared here.

[96msrc/purchases/purchases.module.ts[0m:[93m5[0m:[93m10[0m - [91merror[0m[90m TS2459: [0mModule '"./purchase.entity"' declares 'Purchase' locally, but it is not exported.

[7m5[0m import { Purchase } from './purchase.entity';
[7m [0m [91m         ~~~~~~~~[0m

  [96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m
    [7m4[0m import { Purchase } from './purchase.entity';
    [7m [0m [96m         ~~~~~~~~[0m
    'Purchase' is declared here.

[96msrc/sales/sales.controller.ts[0m:[93m22[0m:[93m7[0m - [91merror[0m[90m TS2322: [0mType 'string | null' is not assignable to type 'string | undefined'.
  Type 'null' is not assignable to type 'string | undefined'.

[7m22[0m       documentPath: file ? `uploads/${file.filename}` : null
[7m  [0m [91m      ~~~~~~~~~~~~[0m

  [96msrc/sales/sales.service.ts[0m:[93m16[0m:[93m76[0m
    [7m16[0m   async create(data: { vehicleId: number; saleDate: string; price: number; documentPath?: string }) {
    [7m  [0m [96m                                                                           ~~~~~~~~~~~~[0m
    The expected type comes from property 'documentPath' which is declared here on type '{ vehicleId: number; saleDate: string; price: number; documentPath?: string | undefined; }'

[96msrc/sales/sales.service.ts[0m:[93m20[0m:[93m39[0m - [91merror[0m[90m TS2769: [0mNo overload matches this call.
  Overload 1 of 3, '(entityLikeArray: DeepPartial<Sale>[]): Sale[]', gave the following error.
    Object literal may only specify known properties, and 'vehicle' does not exist in type 'DeepPartial<Sale>[]'.
  Overload 2 of 3, '(entityLike: DeepPartial<Sale>): Sale', gave the following error.
    Type 'string | null' is not assignable to type 'DeepPartial<string | undefined>'.
      Type 'null' is not assignable to type 'DeepPartial<string | undefined>'.

[7m20[0m     const sale = this.salesRepository.create({
[7m  [0m [91m                                      ~~~~~~[0m

  [96msrc/sales/sale.entity.ts[0m:[93m19[0m:[93m3[0m
    [7m19[0m   documentPath?: string;
    [7m  [0m [96m  ~~~~~~~~~~~~[0m
    The expected type comes from property 'documentPath' which is declared here on type 'DeepPartial<Sale>'

[96msrc/vehicles/vehicle.entity.ts[0m:[93m2[0m:[93m10[0m - [91merror[0m[90m TS2459: [0mModule '"../purchases/purchase.entity"' declares 'Purchase' locally, but it is not exported.

[7m2[0m import { Purchase } from '../purchases/purchase.entity';
[7m [0m [91m         ~~~~~~~~[0m

  [96msrc/purchases/purchase.entity.ts[0m:[93m4[0m:[93m10[0m
    [7m4[0m import { Purchase } from './purchase.entity';
    [7m [0m [96m         ~~~~~~~~[0m
    'Purchase' is declared here.

[96msrc/vehicles/vehicle.entity.ts[0m:[93m19[0m:[93m44[0m - [91merror[0m[90m TS18046: [0m'purchase' is of type 'unknown'.

[7m19[0m   @OneToMany(() => Purchase, (purchase) => purchase.vehicle)
[7m  [0m [91m                                           ~~~~~~~~[0m

[96msrc/vehicles/vehicles.controller.ts[0m:[93m10[0m:[93m40[0m - [91merror[0m[90m TS2345: [0mArgument of type '{ brand: any; model: any; year: number; }' is not assignable to parameter of type 'Omit<Vehicle, "id">'.
  Type '{ brand: any; model: any; year: number; }' is missing the following properties from type 'Omit<Vehicle, "id">': purchases, sales

[7m 10[0m     return this.vehiclesService.create({
[7m   [0m [91m                                       ~[0m
[7m 11[0m       brand: body.brand,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 13[0m       year: Number(body.year)
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m 14[0m     });
[7m   [0m [91m~~~~~[0m

[[90m7:24:42 PM[0m] Found 10 errors. Watching for file changes.

C:\project\autos-backend\node_modules\@nestjs\typeorm\dist\common\typeorm.utils.js:25
        throw new circular_dependency_exception_1.CircularDependencyException('@InjectRepository()');
        ^

CircularDependencyException [Error]: A circular dependency has been detected inside @InjectRepository(). Please, make sure that each side of a bidirectional relationships are decorated with "forwardRef()". Also, try to eliminate barrel files because they can lead to an unexpected behavior too.
    at getRepositoryToken (C:\project\autos-backend\node_modules\@nestjs\typeorm\dist\common\typeorm.utils.js:25:15)
    at InjectRepository (C:\project\autos-backend\node_modules\@nestjs\typeorm\dist\common\typeorm.decorators.js:7:157)
    at Object.<anonymous> (C:\project\autos-backend\src\purchases\purchase.entity.ts:10:22)
    at Module._compile (node:internal/modules/cjs/loader:1688:14)
    at Object..js (node:internal/modules/cjs/loader:1820:10)
    at Module.load (node:internal/modules/cjs/loader:1423:32)
    at Function._load (node:internal/modules/cjs/loader:1246:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1445:12)

Node.js v22.18.0
Terminate batch job (Y/N)? Terminate batch job (Y/N)? Terminate batch job (Y/N)? 
^C